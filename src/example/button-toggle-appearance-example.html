<div style=" gap: 10px">
  <mat-card appearance="outlined" style="margin-bottom: 20px;">
    <mat-card-header>
      <div style="display: flex; justify-content: start">
        <button mat-flat-button style="margin-right: 10px">Сохранить</button>
        <button mat-raised-button>Отменить</button>
      </div>
    </mat-card-header>
    <mat-card-content
    style="margin-top: 20px; margin-left: 20px; margin-right: 20px"
    >
      <mat-card appearance="outlined"class="pt-instructions-warning">
        <div class="pt-instructions-warning-icon"></div>
        <mat-card-header class="pt-instructions-warning-header">
            <mat-card-subtitle>
              <a [href]="" target="_blank">Инструкция по работе со спецификацией</a>
            </mat-card-subtitle>
        </mat-card-header>
      </mat-card>
      <mat-expansion-panel
        [expanded]="true"
        hideToggle
        style="margin-bottom: 15px; padding-top: 25px; border: unset; background-color: #f0f8ff;"
      >
        <div style="display: flex; justify-content: space-between;">

          <div style="display: flex; flex-direction: column; gap: 20px; flex: 1;">

            <div style="display: flex; flex-direction: row;">
              <mat-form-field floatLabel="always" class="example-form-field">
                <mat-label>Название спецификации</mat-label>
                <input matInput type="text" >
              </mat-form-field>
              
              <mat-slide-toggle
                style="margin-left: 20px"
                color="primary">
                  Итоговая
              </mat-slide-toggle>
              
              <mat-slide-toggle
                style="margin-left: 20px"
                color="primary"
                disabled="true">
                Нестандартная
              </mat-slide-toggle>
            </div>

            <div>
              <mat-button-toggle-group name="View" [(ngModel)]="saveMode" class="pt-button-toggle-group" aria-label="Представление" style="display: flex; width: min-content;">
                <mat-button-toggle value="saveAll">Сохранить все</mat-button-toggle>
                <mat-button-toggle value="saveSelected">Сохранить выбранное</mat-button-toggle>
              </mat-button-toggle-group>
            </div>

          </div>
          
          <div style="display: flex; width: 60%;">
            <mat-card class="pt-grid-box-container">
              <mat-card-header style="display: flex; justify-content: center;">
                <mat-card-title><strong>ИТОГО</strong></mat-card-title>
              </mat-card-header>
              <table mat-table [dataSource]="summaryParams" class="mat-elevation-z8">
                <!-- Item Column -->
                <ng-container matColumnDef="sale">
                  <th mat-header-cell *matHeaderCellDef> Продажа </th>
                  <td mat-cell *matCellDef="let summaryParam"> {{summaryParam.sale}} </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
              
                <!-- Cost Column -->
                <ng-container matColumnDef="product">
                  <th mat-header-cell *matHeaderCellDef> Продукт </th>
                  <td mat-cell *matCellDef="let summaryParam"> {{summaryParam.product}} </td>
                  <td mat-footer-cell *matFooterCellDef>  </td>
                </ng-container>
              
                <!-- Cost Column -->
                <ng-container matColumnDef="oldSum">
                  <th mat-header-cell *matHeaderCellDef> Текущая сумма </th>
                  <td mat-cell *matCellDef="let summaryParam"> 
                    <span style='color:red;text-decoration:line-through'>
                      <span style='color:black'>{{summaryParam.oldSum}}</span>
                    </span> 
                  </td>
                  <td mat-footer-cell *matFooterCellDef><strong>Общая сумма:</strong>  </td>
                </ng-container>
              
                <!-- Cost Column -->
                <ng-container matColumnDef="sum">
                  <th mat-header-cell *matHeaderCellDef> Сумма </th>
                  <td mat-cell *matCellDef="let summaryParam"> {{summaryParam.sum}} </td>
                  <td mat-footer-cell *matFooterCellDef><strong>{{getTotalCost()}}</strong> </td>
                </ng-container>
              
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>
              </table>
            </mat-card>
          </div>

        </div>
      </mat-expansion-panel>

      <mat-expansion-panel (opened)="true" (closed)="false" style="margin-bottom: 15px; background-color: #f0f8ff;">
        <mat-expansion-panel-header>
            <div class="pt-platform-header-title">
                <mat-panel-title>Площадка 1</mat-panel-title>
            </div>
            <div>
                <mat-panel-description>Сумма: 57365,874</mat-panel-description>
            </div>
            <div class="pt-platform-header-actions">
              <mat-slide-toggle
                style="margin-right: 10px"
                color="primary">
              </mat-slide-toggle>
          </div>
        </mat-expansion-panel-header>
        <div style="display: flex; flex-wrap: wrap; gap: 15px;"> 
          <ng-container *ngFor="let specCalc of specCalcs">

            <mat-card class="pt-file-container">
              <div class="pt-file-name-wrapper">
                <span class="pt-file-name" >
                  {{specCalc.name}}
                </span>
                
                <mat-slide-toggle
                  style="margin-left: 5px"
                  color="primary">
                </mat-slide-toggle>
              </div>
              <div class="pt-file-info-grid-container">
                <div class="pt-file-column-container">
                  <div class="pt-file-column-label">
                    <span>Продукт: {{specCalc.product}}</span>
                  </div>
                </div>
                <div class="pt-file-column-container">
                  <div class="pt-file-column-label">
                    <span>Сумма: {{specCalc.sum}}</span>
                  </div>
                </div>
              </div>
            </mat-card>
          </ng-container>
          
        </div>
      </mat-expansion-panel>

      <mat-expansion-panel (opened)="true" (closed)="false" style="margin-bottom: 15px; background-color: #f0f8ff;">
        <mat-expansion-panel-header>
            <div class="pt-platform-header-title">
                <mat-panel-title>Артикулы спецификации</mat-panel-title>
            </div>
        </mat-expansion-panel-header>
            <div
            >
              <article-calc></article-calc>
            </div>
      </mat-expansion-panel>
    
    </mat-card-content>
  </mat-card>
</div>

<!-- Copyright 2024 Google LLC. All Rights Reserved.
    Use of this source code is governed by an MIT-style license that
    can be found in the LICENSE file at https://angular.io/license -->
